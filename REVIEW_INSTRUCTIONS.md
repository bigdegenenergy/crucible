# Review Instructions

> **DELETE THIS FILE** after reading and addressing the issues.
> This file was generated by the Review Agent (Gemini).

## Workflow

1. Read the issues below
2. Fix the code
3. **DELETE this file** (`git rm REVIEW_INSTRUCTIONS.md`)
4. Commit with `Agent-Note:` trailer explaining your fixes

## Example Commit

```
fix: address review feedback

Agent-Note: Fixed SQL injection in auth.ts by using parameterized queries.
```

---

## Issues to Address

```toml
[review]
summary = "The PR introduces a sophisticated agentic review workflow and addresses a critical security vulnerability by removing PR-sourced script execution. However, the new workflow introduces undocumented dependencies (Telegram), references a likely invalid future model version, and embeds significant logic in YAML."
decision = "REQUEST_CHANGES"

[[issues]]
severity = "important"
file = ".claude/commands/wake.md"
title = "Invalid or future-dated model version"
description = "The prompt specifies `model: claude-opus-4-5-20251101`. This appears to be a hallucinated or future version string. Using a non-existent model version will likely cause the agent initialization to fail."
suggestion = "Use a currently available model version (e.g., `claude-3-opus-20240229`) or a supported alias."

[[issues]]
severity = "important"
file = ".github/workflows/gemini-pr-review-plus.yml"
title = "Undocumented Telegram secrets and dependencies"
description = "The workflow includes a Telegram notification step (referenced in the summary) requiring `TELEGRAM_BOT_TOKEN` and `TELEGRAM_CHAT_ID`, but these are not listed in the 'Required Secrets' section of the PR description. Missing secrets will cause the workflow to fail."
suggestion = "Add the secrets to the documentation and wrap the Telegram step in an `if: ${{ secrets.TELEGRAM_BOT_TOKEN }}` condition to ensure the workflow is usable by forks or environments without these specific secrets."

[[issues]]
severity = "suggestion"
file = ".github/workflows/gemini-pr-review-plus.yml"
title = "Maintainability: Externalize Python logic"
description = "Embedding a complex Python script directly within the YAML `run` step makes the workflow difficult to read, lint, and test. It also complicates escaping of quotes and variables."
suggestion = "Move the Python logic to a dedicated file (e.g., `.github/scripts/gemini_review.py`) and execute it from the workflow."

[[issues]]
severity = "important"
file = ".github/workflows/gemini-pr-review-plus.yml"
title = "Handle forks gracefully"
description = "The workflow runs on `pull_request` but requires secrets (`GEMINI_API_KEY`). PRs from forks do not have access to secrets by default, which will cause this workflow to fail (red X) for external contributors."
suggestion = "Add a condition to the job or steps: `if: github.event.pull_request.head.repo.full_name == github.repository` or check for the presence of the API key before running the review logic."
```
